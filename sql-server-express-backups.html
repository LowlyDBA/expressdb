<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>What Are the Requirements</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.992cb7aa.css" as="style"><link rel="preload" href="/assets/js/app.5f99cba3.js" as="script"><link rel="preload" href="/assets/js/2.e89d89ec.js" as="script"><link rel="preload" href="/assets/js/13.2e4dc4c0.js" as="script"><link rel="prefetch" href="/assets/js/10.c5a37574.js"><link rel="prefetch" href="/assets/js/11.8f4a043b.js"><link rel="prefetch" href="/assets/js/12.b954a4a2.js"><link rel="prefetch" href="/assets/js/14.70c932c8.js"><link rel="prefetch" href="/assets/js/15.d55386e9.js"><link rel="prefetch" href="/assets/js/16.e1de1bc7.js"><link rel="prefetch" href="/assets/js/17.efcd3585.js"><link rel="prefetch" href="/assets/js/18.8c8f5b78.js"><link rel="prefetch" href="/assets/js/19.edf14423.js"><link rel="prefetch" href="/assets/js/20.c772ad98.js"><link rel="prefetch" href="/assets/js/21.fe98756a.js"><link rel="prefetch" href="/assets/js/22.944d6f42.js"><link rel="prefetch" href="/assets/js/23.c9e9c560.js"><link rel="prefetch" href="/assets/js/24.685fc2ab.js"><link rel="prefetch" href="/assets/js/25.27dd32a9.js"><link rel="prefetch" href="/assets/js/26.0211fa9c.js"><link rel="prefetch" href="/assets/js/3.282f7d35.js"><link rel="prefetch" href="/assets/js/4.289f006a.js"><link rel="prefetch" href="/assets/js/5.a11c1157.js"><link rel="prefetch" href="/assets/js/6.6146f041.js"><link rel="prefetch" href="/assets/js/7.752ce999.js"><link rel="prefetch" href="/assets/js/8.d7ababa3.js"><link rel="prefetch" href="/assets/js/9.95fccf2c.js">
    <link rel="stylesheet" href="/assets/css/0.styles.992cb7aa.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="what-are-the-requirements"><a href="#what-are-the-requirements" class="header-anchor">#</a> What Are the Requirements</h2> <p>When deciding how to backup a database, the two major factors that
are often used are RPO - <a href="https://en.wikipedia.org/wiki/Recovery_point_objective" target="_blank" rel="noopener noreferrer">Recovery Point Object<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> - and RTO - <a href="https://en.wikipedia.org/wiki/Recovery_time_objective" target="_blank" rel="noopener noreferrer">Recovery Time Object<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. That is, how much data can you afford to lose and how long can you afford to spend recovering when disaster strikes.</p> <p>In the scope of a SQL Server Express installation, some different factors might apply.
Most databases on an Express instance probably fall under one of the following:</p> <ul><li>Backups don't matter - the data isn't important</li> <li>Backups matter on a controlled server</li> <li>Backups matter on a customer's server</li></ul> <h3 id="option-1-don-t-backup-at-all"><a href="#option-1-don-t-backup-at-all" class="header-anchor">#</a> Option 1: Don't Backup At All</h3> <p>If you're using SQL Server Express for educational purposes, local development,
unit testing, etc. then you're almost certainly in the first option. Don't sweat it. You can probably afford to keep your entire database in scripts to rebuild on the fly and don't need a formal backup. This makes the case for using a fully source controlled database an easy one as well. Life is good, isn't it?</p> <h3 id="option-2-backup-as-needed"><a href="#option-2-backup-as-needed" class="header-anchor">#</a> Option 2: Backup As Needed</h3> <p>If you're in the second camp and <em>do</em> actually care about backups, things can still be pretty easy - you just need to answer the
RPO and RTO questions and figure out what combination of <a href="https://docs.microsoft.com/en-us/sql/relational-databases/backup-restore/full-file-backups-sql-server" target="_blank" rel="noopener noreferrer">full<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, <a href="https://docs.microsoft.com/en-us/sql/relational-databases/backup-restore/differential-backups-sql-server" target="_blank" rel="noopener noreferrer">differential<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, and <a href="https://docs.microsoft.com/en-us/sql/relational-databases/backup-restore/transaction-log-backups-sql-server" target="_blank" rel="noopener noreferrer">transactional log<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> backups best fit your needs and when to schedule them. A normal database (far larger than 10GB) might typically have the following backup schedule:</p> <ul><li>Weekly full backups</li> <li>Daily differential backups</li> <li>15 minute transactional backups</li></ul> <p>Since none of the databases under SQL Server Express can exceed 10GB and the backups can be compressed, however, it may be easier to make the full backups more frequent. If there is a high transactional volume on the database and recovering quickly is important, the below backup template is a good starting point:</p> <ul><li>Daily full backups</li> <li>12 hour differential backup</li> <li>15 minute transactional backups</li></ul> <p>Remember, though that even a small database can still generate huge amounts of transactions that can quickly make a differential backup larger than a full backup. In this case, more frequent full backups might yield faster recovery times and less space overall.</p> <p>Conversely, if the data isn't changing very often, an even simpler route is to take advantage of the simple recovery mode and only deal with full backups. The time to restore a backup less than 10GB will be negligible in most cases. The storage required is also not a general concern either, with the availability of storage being so cheap and easy to come by. The simplest backup schedule is:</p> <ul><li>Daily full backup</li></ul> <h3 id="option-3-backup-for-customers"><a href="#option-3-backup-for-customers" class="header-anchor">#</a> Option 3: Backup for Customers</h3> <p>This one is the trickiest. While customers will most likely have the ability to change the backup plans set in place by default for an application, many will never choose to change them due to support agreements or lack of domain knowledge. If an application crashes, even because of a database related issue, it will reflect poorly on the software product, not Microsoft. Having at least a light backup plan in place by default allows the customer to recover some of their lost data even if they didn't have the know-how to set it up for themselves.</p> <p>Without tacking on additional dozens of GB of space requirements for a product, a once weekly
full backup should provide a sweet spot
between convenience and safety. Using the simple recovery mode will remove the necessity for managing and storing transaction log backups as well, decreasing the complexity and backup size of the backup plan.</p> <h2 id="backup-scripts-for-sql-express"><a href="#backup-scripts-for-sql-express" class="header-anchor">#</a> Backup Scripts for SQL Express</h2> <p>Whether an instance is Enterprise or Express, it needs a tried and true method of backing up. While it is easy enough to hand-craft backup commands for any given database, creating scripts to automate the more intricate parts of the commands and make them re-usable is a feat. The favorite of many DBAs and companies is <a href="https://ola.hallengren.com/sql-server-backup.html" target="_blank" rel="noopener noreferrer">Ola Hallengren's backup scripts<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> which do an amazing job of making it easy to customize and maintain smart backup scripts.</p> <p>Here are some examples that implement the above examples using Ola's scripts. Included are some best practices like compression, logging the backup to a log table,
and cleaning up old backup files to prevent disks from filling up.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Each backup should customize options based on requirements. The below are meant as guides and should not be used on production environments without additional testing and customization.</p></div> <h3 id="sql-server-express-standard-backup-schedule"><a href="#sql-server-express-standard-backup-schedule" class="header-anchor">#</a> SQL Server Express Standard Backup Schedule</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">/* Weekly Full Backup */</span>
<span class="token keyword">EXECUTE</span> dbo<span class="token punctuation">.</span>DatabaseBackup
<span class="token variable">@Databases</span> <span class="token operator">=</span> <span class="token string">'USER_DATABASES'</span><span class="token punctuation">,</span>
<span class="token variable">@Directory</span> <span class="token operator">=</span> <span class="token string">'C:\Backup'</span><span class="token punctuation">,</span>
<span class="token variable">@BackupType</span> <span class="token operator">=</span> <span class="token string">'FULL'</span><span class="token punctuation">,</span>
<span class="token variable">@Compess</span> <span class="token operator">=</span> <span class="token string">'Y'</span><span class="token punctuation">,</span>
<span class="token variable">@LogToTable</span> <span class="token operator">=</span> <span class="token string">'Y'</span><span class="token punctuation">,</span>
<span class="token variable">@CleanupTime</span> <span class="token operator">=</span> <span class="token number">336</span><span class="token punctuation">,</span> <span class="token comment">--14 days</span>
<span class="token variable">@CleanupMode</span> <span class="token operator">=</span> <span class="token string">'AFTER_BACKUP'</span><span class="token punctuation">,</span>
<span class="token variable">@Verify</span> <span class="token operator">=</span> <span class="token string">'Y'</span>

<span class="token comment">/* Daily Differential Backup */</span>
<span class="token keyword">EXECUTE</span> dbo<span class="token punctuation">.</span>DatabaseBackup
<span class="token variable">@Databases</span> <span class="token operator">=</span> <span class="token string">'USER_DATABASES'</span><span class="token punctuation">,</span>
<span class="token variable">@Directory</span> <span class="token operator">=</span> <span class="token string">'C:\Backup'</span><span class="token punctuation">,</span>
<span class="token variable">@BackupType</span> <span class="token operator">=</span> <span class="token string">'DIFF'</span><span class="token punctuation">,</span>
<span class="token variable">@Compess</span> <span class="token operator">=</span> <span class="token string">'Y'</span><span class="token punctuation">,</span>
<span class="token variable">@LogToTable</span> <span class="token operator">=</span> <span class="token string">'Y'</span><span class="token punctuation">,</span>
<span class="token variable">@CleanupTime</span> <span class="token operator">=</span> <span class="token number">168</span><span class="token punctuation">,</span> <span class="token comment">--7 days</span>
<span class="token variable">@CleanupMode</span> <span class="token operator">=</span> <span class="token string">'AFTER_BACKUP'</span><span class="token punctuation">,</span>
<span class="token variable">@Verify</span> <span class="token operator">=</span> <span class="token string">'Y'</span>

<span class="token comment">/* 15 Minute Tran Log Backup */</span>
<span class="token keyword">EXECUTE</span> dbo<span class="token punctuation">.</span>DatabaseBackup
<span class="token variable">@Databases</span> <span class="token operator">=</span> <span class="token string">'USER_DATABASES'</span><span class="token punctuation">,</span>
<span class="token variable">@Directory</span> <span class="token operator">=</span> <span class="token string">'C:\Backup'</span><span class="token punctuation">,</span>
<span class="token variable">@BackupType</span> <span class="token operator">=</span> <span class="token string">'LOG'</span><span class="token punctuation">,</span>
<span class="token variable">@Compess</span> <span class="token operator">=</span> <span class="token string">'Y'</span><span class="token punctuation">,</span>
<span class="token variable">@LogToTable</span> <span class="token operator">=</span> <span class="token string">'Y'</span><span class="token punctuation">,</span>
<span class="token variable">@CleanupTime</span> <span class="token operator">=</span> <span class="token number">168</span><span class="token punctuation">,</span> <span class="token comment">--7 days</span>
<span class="token variable">@CleanupMode</span> <span class="token operator">=</span> <span class="token string">'AFTER_BACKUP'</span><span class="token punctuation">,</span>
<span class="token variable">@Verify</span> <span class="token operator">=</span> <span class="token string">'Y'</span>
</code></pre></div><h3 id="highly-transactional-low-rto-sql-server-express-backup-schedule"><a href="#highly-transactional-low-rto-sql-server-express-backup-schedule" class="header-anchor">#</a> Highly Transactional / Low RTO SQL Server Express Backup Schedule</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">/* Daily Full Backup */</span>
<span class="token keyword">EXECUTE</span> dbo<span class="token punctuation">.</span>DatabaseBackup
<span class="token variable">@Databases</span> <span class="token operator">=</span> <span class="token string">'USER_DATABASES'</span><span class="token punctuation">,</span>
<span class="token variable">@Directory</span> <span class="token operator">=</span> <span class="token string">'C:\Backup'</span><span class="token punctuation">,</span>
<span class="token variable">@BackupType</span> <span class="token operator">=</span> <span class="token string">'FULL'</span><span class="token punctuation">,</span>
<span class="token variable">@Compess</span> <span class="token operator">=</span> <span class="token string">'Y'</span><span class="token punctuation">,</span>
<span class="token variable">@LogToTable</span> <span class="token operator">=</span> <span class="token string">'Y'</span><span class="token punctuation">,</span>
<span class="token variable">@CleanupTime</span> <span class="token operator">=</span> <span class="token number">48</span><span class="token punctuation">,</span> <span class="token comment">--3 days</span>
<span class="token variable">@CleanupMode</span> <span class="token operator">=</span> <span class="token string">'AFTER_BACKUP'</span><span class="token punctuation">,</span>
<span class="token variable">@Verify</span> <span class="token operator">=</span> <span class="token string">'Y'</span>

<span class="token comment">/* 12 Hour Differential Backup */</span>
<span class="token keyword">EXECUTE</span> dbo<span class="token punctuation">.</span>DatabaseBackup
<span class="token variable">@Databases</span> <span class="token operator">=</span> <span class="token string">'USER_DATABASES'</span><span class="token punctuation">,</span>
<span class="token variable">@Directory</span> <span class="token operator">=</span> <span class="token string">'C:\Backup'</span><span class="token punctuation">,</span>
<span class="token variable">@BackupType</span> <span class="token operator">=</span> <span class="token string">'DIFF'</span><span class="token punctuation">,</span>
<span class="token variable">@Compess</span> <span class="token operator">=</span> <span class="token string">'Y'</span><span class="token punctuation">,</span>
<span class="token variable">@LogToTable</span> <span class="token operator">=</span> <span class="token string">'Y'</span><span class="token punctuation">,</span>
<span class="token variable">@CleanupTime</span> <span class="token operator">=</span> <span class="token number">24</span><span class="token punctuation">,</span> <span class="token comment">--1 day</span>
<span class="token variable">@CleanupMode</span> <span class="token operator">=</span> <span class="token string">'AFTER_BACKUP'</span><span class="token punctuation">,</span>
<span class="token variable">@Verify</span> <span class="token operator">=</span> <span class="token string">'Y'</span>

<span class="token comment">/* 15 Minute Tran Log Backup */</span>
<span class="token keyword">EXECUTE</span> dbo<span class="token punctuation">.</span>DatabaseBackup
<span class="token variable">@Databases</span> <span class="token operator">=</span> <span class="token string">'USER_DATABASES'</span><span class="token punctuation">,</span>
<span class="token variable">@Directory</span> <span class="token operator">=</span> <span class="token string">'C:\Backup'</span><span class="token punctuation">,</span>
<span class="token variable">@BackupType</span> <span class="token operator">=</span> <span class="token string">'LOG'</span><span class="token punctuation">,</span>
<span class="token variable">@Compess</span> <span class="token operator">=</span> <span class="token string">'Y'</span><span class="token punctuation">,</span>
<span class="token variable">@LogToTable</span> <span class="token operator">=</span> <span class="token string">'Y'</span><span class="token punctuation">,</span>
<span class="token variable">@CleanupTime</span> <span class="token operator">=</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token comment">--12 hours</span>
<span class="token variable">@CleanupMode</span> <span class="token operator">=</span> <span class="token string">'AFTER_BACKUP'</span><span class="token punctuation">,</span>
<span class="token variable">@Verify</span> <span class="token operator">=</span> <span class="token string">'Y'</span>
</code></pre></div><h3 id="simple-sql-server-express-backup-schedule"><a href="#simple-sql-server-express-backup-schedule" class="header-anchor">#</a> Simple SQL Server Express Backup Schedule</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">/* Daily Full Backup with Simple Recovery Mode*/</span>
<span class="token keyword">EXECUTE</span> dbo<span class="token punctuation">.</span>DatabaseBackup
<span class="token variable">@Databases</span> <span class="token operator">=</span> <span class="token string">'USER_DATABASES'</span><span class="token punctuation">,</span>
<span class="token variable">@Directory</span> <span class="token operator">=</span> <span class="token string">'C:\Backup'</span><span class="token punctuation">,</span>
<span class="token variable">@BackupType</span> <span class="token operator">=</span> <span class="token string">'FULL'</span><span class="token punctuation">,</span>
<span class="token variable">@Compess</span> <span class="token operator">=</span> <span class="token string">'Y'</span><span class="token punctuation">,</span>
<span class="token variable">@LogToTable</span> <span class="token operator">=</span> <span class="token string">'Y'</span><span class="token punctuation">,</span>
<span class="token variable">@CleanupTime</span> <span class="token operator">=</span> <span class="token number">72</span><span class="token punctuation">,</span> <span class="token comment">--3 days</span>
<span class="token variable">@CleanupMode</span> <span class="token operator">=</span> <span class="token string">'AFTER_BACKUP'</span><span class="token punctuation">,</span>
<span class="token variable">@Verify</span> <span class="token operator">=</span> 'Y
</code></pre></div><h2 id="scheduling"><a href="#scheduling" class="header-anchor">#</a> Scheduling</h2> <p>Wondering how to automate these backups? Check out the <a href="/sql-server-express-replace-sql-agent.html">Replacing SQL Agent on SQL Server Express</a> article for methods to schedule jobs without the SQL Agent.</p> <br> <br> <!----></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.5f99cba3.js" defer></script><script src="/assets/js/2.e89d89ec.js" defer></script><script src="/assets/js/13.2e4dc4c0.js" defer></script>
  </body>
</html>
